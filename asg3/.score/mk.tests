#!/bin/sh
# $Id: mk.tests,v 1.1 2016-06-28 14:48:38-07 - - $
export PATH=$PATH:/afs/cats.ucsc.edu/courses/cse110a-wm/bin
ulimit -f 32
ulimit -t 120

PROG=../keyvalue
GRIND="valgrind --leak-check=full --show-reachable=yes"

for test in test[1-3].in
do
   echo $test
   $PROG <$test 1>$test.listmap.out 2>$test.listmap.err
   echo status = $? >$test.status
   /afs/cats/courses/cse11-wm/Assignments/asg3-listmap-
templates/misc/pkeyvalue.perl <$test1>$test.pkeyvalue.out
   diff $test.listmap.out $test.pkeyvalue.out >$test.out.diffs
done

echo If any of the "*.out.diffs" have data,
echo then keyvalue did not produce correct output.
ls -la *.out.diffs

$GRIND $PROG <testx-leaks.keyvalue 1>leaks-test.out 2>leaks-test.err

